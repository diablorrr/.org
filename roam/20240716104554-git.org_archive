#    -*- mode: org -*-


Archived entries from file /home/yoshiki01/.org/roam/20240716104554-git.org


* 查询
:PROPERTIES:
:ARCHIVE_TIME: 2025-06-19 四 20:37
:ARCHIVE_FILE: ~/.org/roam/20240716104554-git.org
:ARCHIVE_CATEGORY: 20240716104554-git
:END:
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| 命令            | 参数                                        | 作用                                                               |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| git reset       | --soft                                      | (移动HEAD，同时移动分支)HEAD改变；I和WD不变                        |
|                 | --mixed(默认)                               | HEAD、I改变；WD不变                                                |
|                 | --hard(危险)                                | HEAD、I、WD改变                                                    |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| git branch      |                                             | 查看本地分支                                                       |
|                 | -r                                          | 查看远程分支                                                       |
|                 | -a                                          | 查看本地、远程分支                                                 |
|                 | -d                                          | 安全删除当前分支及提交                                             |
|                 | -D                                          | 强制(有未合并的更改)也删除                                         |
|                 | -m                                          | 重命名分支                                                         |
|                 | -f (--force)                                | 强制执行操作，即使目标分支存在也会覆盖                             |
|                 | -M                                          | -m和-f的组合[fn:3]                                                 |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| git clone       |                                             | 克隆仓库                                                           |
|                 | --depth=1                                   | 只克隆最新的版本(快)                                               |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| git checkout    |                                             | 检查分支                                                           |
|                 | tags/<tag名称>                              | 切换到指定tag                                                      |
|                 | -b <分支> <commit>                          | 新建分支并切换                                                     |
|                 | --orphan                                    | 创建没有历史的新分支                                               |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| git rebase      |                                             | 将当前分支的更改移到一个分支，保持历史线性                         |
|                 | -i                                          | 交互式修改提交历史                                                 |
|                 | --root                                      | rebase范围扩展到整个提交历史，包括第一个提交                       |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| git restore     | <文件名>                                    | 撤销工作区未暂存的修改                                             |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| git cherry-pick |                                             | 选择特定提交移到当前分支(无法处理合并提交)                         |
|                 | --abort                                     | cherry-pick产生冲突，撤回                                          |
|                 | --continue                                  | cherry-pick解决冲突，继续                                          |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| git log         |                                             | 查看提交历史                                                       |
|                 | --graph                                     | 图形化显示                                                         |
|                 | --oneline                                   | 一行显示提交                                                       |
|                 | --decorate                                  | 显示分支、标签和HEAD的引用信息                                     |
|                 | --all                                       | 显示所有分支                                                       |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| git reflog      |                                             | 记录本地HEAD的变更，撤销误操作                                     |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| git add         |                                             | 将更改添加到暂存区                                                 |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| [[id:8bebd052-69bc-42ee-b8ed-dd48f3e29bed][git stash]]       |                                             | 将暂存区和工作区的修改保存到一个堆栈，恢复干净状态                 |
|                 | save "注释"                                 | 同上，带注释                                                       |
|                 | list                                        | 查看所有保存的stash记录                                            |
|                 | apply                                       | 恢复最近一次的stash                                                |
|                 | pop                                         | 恢复最近一次的stash(删除对应stash记录)                             |
|                 | drop <stash@{数字}>                         | 删除指定的stash记录                                                |
|                 | clear                                       | 清空所有stash记录                                                  |
|                 | show -p <stash@{数字}>                      | 查看详细的变更内容                                                 |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| git commit      |                                             | 暂存区修改提交到版本区；打开消息提交编辑器                         |
|                 | -m                                          | 附带提交信息                                                       |
|                 | -a                                          | 提交时自动添加到暂存区                                             |
|                 | --amend                                     | 修改上一次提交的提交消息                                           |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| [[id:4e6206ae-df01-4811-8ffe-8c49689169b5][git diff]]        |                                             | 差异：工作区、暂存区                                               |
|                 | --cached/staged                             | 差异：暂存区、最新提交                                             |
|                 | HEAD                                        | 差异：工作区、最新提交                                             |
|                 | <commit1> <commit2>                         | 差异：两个提交                                                     |
|                 | <分支>                                      | 差异：当前分支、其他分支                                           |
|                 | <分支1>..<分支2>                            | 差异：两个分支差异                                                 |
|                 | -- . ':(exclude)<排除的目录或文件>'         | 差异：排除目录或文件                                               |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| git push        |                                             | 正常推送分支                                                       |
|                 | -f                                          | 忽略冲突，覆盖远程分支历史(危险)                                   |
|                 | <远程仓库名> -d <分支>                      | 删除远程分支                                                       |
|                 | -u <远程仓库名> <分支名>                    | 推送到远程仓库的分支                                               |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| git pull        |                                             | 拉取分支                                                           |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| git merge       | <分支>                                      | 将指定分支合并到当前分支                                           |
|                 | -                                           | 将上一次切换的分支合并到当前分支                                   |
|                 | --abort                                     | merge产生冲突，撤回                                                |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| git fetch       |                                             | 获取最新更新                                                       |
|                 | --prune                                     | 获取最新更新，让分支保持一致                                       |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| git remote      |                                             | 列出远程仓库                                                       |
|                 | -v                                          | 列出远程仓库和URL                                                  |
|                 | add <远程仓库名[fn:1]> <远程仓库地址[fn:2]> | 添加远程仓库                                                       |
|                 | remove <远程仓库名>                         | 删除远程仓库                                                       |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| [[id:c25f42e9-0361-4966-a1b5-e0f18a4adf45][git submodule]]   |                                             | 允许将一个git仓库作为另一个git仓库的子模块，保持仓库间独立版本控制 |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
| git rm          |                                             | 删除工作区和索引区的内容                                           |
|                 | -r                                          | 递归删除                                                           |
|                 | --cached                                    | 删除索引区内容                                                     |
|-----------------+---------------------------------------------+--------------------------------------------------------------------|
** 配置
|------------------------+--------------------+----------------------------|
| 配置文件               | 作用               | 查询方法                   |
|------------------------+--------------------+----------------------------|
| /etc/gitconfig         | git系统级配置      | git config --system --list |
| ~/.gitconfig           | git用户级配置      | git config --global --list |
| <仓库路径>/.git/config | git仓库级配置      | git config --local --list  |
|------------------------+--------------------+----------------------------|
| [[id:a8270354-11ea-4b5c-ae42-87170cd68368][.gitignore]]             | git忽略文件/文件夹 |                            |
|------------------------+--------------------+----------------------------|
