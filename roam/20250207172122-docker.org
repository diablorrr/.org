:PROPERTIES:
:ID:       a47cc941-ccc6-4893-9862-d5b245ea912b
:END:
#+title: docker
#+LAST_MODIFIED: 2025-03-13 19:42:46

* 使用
| 功能                                     | 命令                                                                    | 备注                            |
|------------------------------------------+-------------------------------------------------------------------------+---------------------------------|
| 运行容器(从镜像)                         | docker run --name <容器名(自己设置)> -p <主机端口:容器端口> -d <镜像名> | -d 让容器在后台启动             |
|                                          |                                                                         | -p 设置主机端口和容器端口的映射 |
| 运行容器(从停止)                         | docker start <容器名>                                                   |                                 |
| 停止容器                                 | docker stop <容器名>                                                    |                                 |
| 重启容器                                 | docker restart <容器名>                                                 |                                 |
| 进入容器                                 | docker exec -it <容器名> <命令行工具(bash)>                             |                                 |
|------------------------------------------+-------------------------------------------------------------------------+---------------------------------|
| 拉取镜像                                 | docker pull <镜像名>:<标签>                                             |                                 |
|------------------------------------------+-------------------------------------------------------------------------+---------------------------------|
| 查看镜像                                 | docker images                                                           |                                 |
| 查看运行中的容器                         | docker ps                                                               | -a 查看所有容器(包括停止的)     |
| 查看容器日志                             | docker logs <容器名>                                                    | 查看一些错误原因                |
|------------------------------------------+-------------------------------------------------------------------------+---------------------------------|
| 删除所有停止的容器，但36小时内创建的除外 | docker container prune --filter "until=36h"                             |                                 |
| 删除容器                                 | docker rm <容器名>                                                      |                                 |
| 删除镜像                                 | docker rmi <镜像名/镜像id>                                              | -f 强制删除                     |
|------------------------------------------+-------------------------------------------------------------------------+---------------------------------|
| 将主机目录或文件挂载到容器内             | docker run -v <主机路径>:<容器路径> <镜像名>                            |                                 |
| 容器和主机之间复制文件                   | docker cp <容器ID或容器名称>:<容器内路径> <主机路径>                    |                                 |
|                                          | docker cp <主机路径> <容器ID或容器名称>:<容器内路径>                    |                                 |


* 配置
- 文件位置 :: /​etc/docker/daemon.json
  (没有的话，需要手动创建)
** 镜像设置
#+begin_src json
{
        "registry-mirrors": [
                "https://docker.lms.run",
                "https://hub.rat.dev",
                "https://docker.1panel.live"
        ]
}
#+end_src


