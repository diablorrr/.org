:PROPERTIES:
:ID:       c76e9ab3-bcb3-4a97-ba1b-48809c337c51
:END:
#+title: redis

* 问题解决
[[id:ebe6c5ce-08f0-46eb-b28b-c07b40d363e3][docker配置redis]]

* cheat sheet
|--------------------+-------------------------------+--------------------------------+----------------------------|
|                    | 命令                          | 功能                           | 备注                       |
|--------------------+-------------------------------+--------------------------------+----------------------------|
| 启动(客户端)       | redis-cli                     | 启动redis客户端                |                            |
|                    | redis-cli --raw               | 启动redis客户端(原始格式输出)  |                            |
|--------------------+-------------------------------+--------------------------------+----------------------------|
| 启动(服务端)       | redis-server                  | 启动redis服务端                |                            |
|                    | redis-server <配置路径>       | 加载指定路径下的[[id:b5baef5f-1ff7-49c3-a49b-ce7ca2c57b06][redis.conf]]     |                            |
|                    | ping                          | 检测redis服务是否启动          |                            |
|--------------------+-------------------------------+--------------------------------+----------------------------|
| 配置               | config set requirepass <密码> | 设置密码                       |                            |
|                    | auth <密码>                   | 验证密码                       |                            |
|                    | config set 配置               | 设置配置                       |                            |
|                    | config get <配置>             | 查看配置                       |                            |
|--------------------+-------------------------------+--------------------------------+----------------------------|
| 数据库             | select <编号>                 | 切换到<编号>数据库(0-15)[fn:4] |                            |
|                    | info keyspace                 | 查看所有数据库的键的分布信息   |                            |
|                    | flushdb                       | 清空当前数据库                 |                            |
|                    | flushall                      | 清空所有数据库                 |                            |
|                    | dbsize                        | 当前数据库的键总数             |                            |
|--------------------+-------------------------------+--------------------------------+----------------------------|
| 通用               | keys *                        | 查询所有键                     | * 为全部                   |
|                    | type <键>                     | 检测键类型                     |                            |
|                    | del <键>                      | 删除键                         |                            |
|--------------------+-------------------------------+--------------------------------+----------------------------|
| string             | set <键> <值>                 | 设置键值对                     |                            |
|                    | setex <键> <时间> <值>        | 设置带过期时间的键值对         |                            |
|                    | setnx <键> <值>               | 键不存在时才设置               |                            |
|                    | get <键>                      | 返回键对应的值(string)         |                            |
|                    | ttl <键>                      | 查看键的过期时间               |                            |
|                    | expire <键> <时间>            | 设置键的过期时间               |                            |
|--------------------+-------------------------------+--------------------------------+----------------------------|
| list[fn:1]         | lpush <键> <值>...            | 列表左边插入元素(单个/多个)    |                            |
|                    | rpush <键> <值>...            | 列表右边插入元素(单个/多个)    |                            |
|                    | lrange <键> <起始> <终止>     | 输出列表<起始>到<终止>的元素   | 终止位置-1表示最后一个元素 |
|                    | llen <键>                     | 输出列表的长度                 |                            |
|                    | lpop <键> <数量>              | 列表左边删除<数量>的值         |                            |
|                    | rpop <键> <数量>              | 列表右边删除<数量>的值         |                            |
|                    | ltrim <键> <起始> <终止>      | 保留列表<起始><终止>之间的元素 |                            |
|--------------------+-------------------------------+--------------------------------+----------------------------|
| set[fn:2]          | sadd <键> <值>                | 添加元素                       |                            |
|                    | smembers <键>                 | 查看集合中的全部元素           |                            |
|                    | scard <键>                    | 查看集合中元素数量             |                            |
|                    | sismember <键> <值>           | 判断集合中元素是否存在         |                            |
|                    | srem <键> <值>                | 集合中删除元素                 |                            |
|--------------------+-------------------------------+--------------------------------+----------------------------|
| hash               | hset <键> <字段:键> <字段:值> | 哈希表中设置键值对             |                            |
|                    | hdel <键> <字段:键>           | 哈希表中删除键值对             |                            |
|                    | hexists <键> <字段:键>        | 判断哈希表中某个键是否存在     |                            |
|                    | hget <键> <字段:键>           | 获取哈希表中的某个键           |                            |
|                    | hgetall <键>                  | 返回哈希表中所有的键值对       |                            |
|                    | hkeys <键>                    | 获取哈希表中所有的键           |                            |
|                    | hlen <键>                     | 获取哈希表中所有键的数量       |                            |
|--------------------+-------------------------------+--------------------------------+----------------------------|
| sorted set[fn:3]   |                               |                                |                            |
|--------------------+-------------------------------+--------------------------------+----------------------------|
| 发布订阅模式[fn:5] | subscribe <频道>              | 订阅一个或多个频道             |                            |
|                    | publish <频道> <消息>         | 向指定频道发送消息             |                            |
|--------------------+-------------------------------+--------------------------------+----------------------------|
| 消息队列stream     |                               |                                |                            |
|--------------------+-------------------------------+--------------------------------+----------------------------|
| 地理空间geospatial |                               |                                |                            |
|--------------------+-------------------------------+--------------------------------+----------------------------|
| hyperloglog        |                               |                                |                            |
|--------------------+-------------------------------+--------------------------------+----------------------------|
| 位图bitmap         |                               |                                |                            |
|--------------------+-------------------------------+--------------------------------+----------------------------|
| 位域bitfield       |                               |                                |                            |
|--------------------+-------------------------------+--------------------------------+----------------------------|
| 事务               | multi                         | 开启事务                       |                            |
|                    | exec                          | 执行事务队列中的每一条内容     |                            |
|--------------------+-------------------------------+--------------------------------+----------------------------|


* Footnotes
[fn:5] 消息即时推送，无法持久化(无历史消息，离线客户端收不到消息)
[fn:4] 127.0.0.1:6379[编号]，命令行中显示的编号即为当前的所在的数据库，如果没有编号，代表在0号数据库
[fn:3] 带分数的集合：每个元素带一个分数；元素不可重复，分数可以重复
[fn:2] 不可重复，无序
[fn:1] 可重复，有序
