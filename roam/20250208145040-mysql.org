:PROPERTIES:
:ID:       4c1ab286-7f66-46b2-a65a-35c20b6e7251
:END:
#+title: mysql
#+filetags: index

* mysql
[[id:7a54e256-abbf-4d07-809c-85918ef01e0c][mysql执行一条sql查询语句期间发生了什么？]]
[[id:0ef04dce-3931-4446-80fc-69e37e960fc0][mysql索引]] [[id:3c8eb7cf-68ed-4359-8e3f-f7c620b49fc0][mysql事务]] [[id:58957271-3fa8-40bc-9140-010e1c8eb91e][mysql锁]] [[id:6c5d8b5d-a530-473b-89aa-8af43faba050][mysql日志]]

** 基础概念
- 数据库 :: 表的集合
- 表     :: 数据的矩阵，行和列组成
- 行     :: 称为"记录"，一组相关的数据
- 列     :: 称为"字段"，相同类型的数据
- 主键   :: 唯一标识表中一条记录
- 外键   :: 用于关联两个表

** 约束关键字
用于约束 *列（字段）* ，以下都是针对 该列中每行数据
- PRIMARY KEY :: （主键） *唯一，不能有NULL*
- UNIQUE      ::  *唯一，能有NULL*
- FOREIGN KEY :: （外键）该列的值来自另一个表的 PRIMARY键 或 UNIQUE键
- INDEX / KEY :: 创建索引
- NOT NULL    :: *不能有NULL*
- CHECK       :: 列中的值必须符合指定的条件

** 功能关键字
- AUTO_INCREMENT :: *自增* ，为新插入的行自动生成一个序列值
- DEFAULT        :: *默认值* ，插入数据时没指定值，则使用默认值



* 问题解决
1. [[id:469e9975-eced-4ee3-9ede-2ef732085eae][docker配置mysql密码]]


* cheat sheet
|           | 命令                                                    | 作用                                                                 |
|-----------+---------------------------------------------------------+----------------------------------------------------------------------|
| 登录/退出 | mysql -u <用户名> -p                                    | 登录mysql                                                            |
|           | exit                                                    | 退出mysql                                                            |
|-----------+---------------------------------------------------------+----------------------------------------------------------------------|
| 数据库    | show databases;                                         | 查看所有数据库                                                       |
|           | select database();                                      | 查看当前数据库                                                       |
|           | use <数据库名>                                          | 切换数据库                                                           |
|           | create database <数据库名>                              | 创建数据库                                                           |
|           | drop database <数据库名>                                | 删除数据库                                                           |
|-----------+---------------------------------------------------------+----------------------------------------------------------------------|
| 表结构    | show tables;                                            | 查看当前数据库中所有表                                               |
|           | create table <表名> (<字段名 类型>, <字段名 类型>...);  | 创建表                                                               |
|           | drop table <表名>;                                      | 删除表                                                               |
|           | desc <表名>;                                            | 查看表结构                                                           |
|           | alter table <表名> <操作[fn:操作命令]>;                 | 修改表结构                                                           |
|-----------+---------------------------------------------------------+----------------------------------------------------------------------|
| 数据crud  | insert into <表名> values (<值1>, <值2>...)             | 插入数据                                                             |
|           | delete from <表名> where <条件>;                        | 删除数据                                                             |
|           | update <表名> set <字段>=<值> where <条件>;             | 更新数据                                                             |
|           | select * from <表名>;                                   | 查询所有数据                                                         |
|-----------+---------------------------------------------------------+----------------------------------------------------------------------|
| 用户/权限 | create user '<用户名>'@'<主机>' identified by '<密码>'; | 创建用户                                                             |
|           | select User, Host from mysql.user                       | 查看系统用户表                                                       |
|           | drop user '<用户名>'@'<主机>';                          | 删除用户                                                             |
|-----------+---------------------------------------------------------+----------------------------------------------------------------------|
| 备份/恢复 | mysqldump -u <用户名> -p <库名> > <备份文件>.sql        | 备份数据库(系统终端使用)                                             |
|           | mysql -u <用户名> -p <库名> < <备份文件>.sql            | 恢复数据库(系统终端使用：数据库中得先新建<库名>)                     |
|           | source <[[id:71788677-257c-4952-96c6-aadd1b280c77][.sql]]文件路径>                                   | 恢复数据库(mysql命令行中使用：数据库中得先新建<库名>，且use <库名>;) |
** 常用数据类型
| 数据类型     | 存储空间            |
|--------------+---------------------|
| INT          | 4字节               |
| VARCHAR(<N>) | 可变，最大65535字节 |


* Footnotes
[fn:操作命令]
| 命令                                        | 作用               |
|---------------------------------------------+--------------------|
| add column <列名> <数据类型> [after <列名>] | 添加列[指定列后]   |
| drop column <列名>                          | 删除列             |
| modify column <列名> <数据类型>             | 修改列数据类型     |
| change column <旧列名> <新列名> <数据类型>  | 重命令列并修改类型 |
