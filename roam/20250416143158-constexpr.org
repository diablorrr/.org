:PROPERTIES:
:ID:       b06260e2-ed7a-4b12-8e9d-b07a3e564a75
:END:
#+title: constexpr
#+filetags: cpp

* constexpr [[https://www.learncpp.com/cpp-tutorial/constexpr-variables/][参考]]
1. cpp 11标准 引入的关键字，是一种优化手段；可以用于修饰：变量、表达式、函数，声明它们是[[id:fec1bdbd-cae6-4b45-b136-00dcad95b5ad][常量表达式]]，强制编译器将上述内容在编译期求值（相关的编译器优化见：[[id:a047ed53-7758-4ecd-8451-1eaf172442eb][编译期计算]]）-> 提升运行时性能
   #+begin_src cpp :results output :namespaces std :includes <iostream>
   // The return value of a non-constexpr function is not constexpr
   int five()
   {
       return 5;
   }

   int main()
   {
       constexpr double gravity { 9.8 }; // ok: 9.8 is a constant expression
       constexpr int sum { 4 + 5 };      // ok: 4 + 5 is a constant expression
       constexpr int something { sum };  // ok: sum is a constant expression

       std::cout << "Enter your age: ";
       int age{};
       std::cin >> age;

       constexpr int myAge { age };      // compile error: age is not a constant expression
       constexpr int f { five() };       // compile error: return value of five() is not constexpr

       return 0;
   }
   #+end_src
2. 包含隐式的 const
