:PROPERTIES:
:ID:       38f5ad84-add1-40ab-a0ff-2ef0c81d59f2
:END:
#+title: TCP滑动窗口机制
#+filetags: network

* TCP滑动窗口机制
1. *作用* ：
   1) 提高发送效率（慢：停止等待协议）
      - 停止等待协议 :: 发送一个数据，等到确认才发下一个
      - 滑动窗口   :: 无需等待确认，在一个窗口内可连续发送数据
   2) 控制发送方速率，以匹配接收方数据处理能力
      - 滑动窗口   :: 接收方通过 TCP头的窗口大小字段 告诉发送方自己能处理的数据量


** 图:发送方窗口 :ATTACH:
:PROPERTIES:
:ID:       b54196fa-03f0-457e-8cd5-b7e26aafe49b
:END:
[[attachment:_20250806_164213screenshot.png]]
可用窗口大小 = SND.WND - (SND.NXT - SND.UNA)
- SND.WND = min(cwnd, rwnd) :: 🔥 发送窗口大小 = min(拥塞窗口,接收窗口)
- SND.NXT                   :: 未发但可发的第一个字节
- SND.UNA                   :: 已发但未确认的第一个字节


** 图:接收方窗口 :ATTACH:
:PROPERTIES:
:ID:       21a61071-08b5-4670-8142-91f0c447a045
:END:
[[attachment:_20250806_164255screenshot.png]]
- RCV.WND :: 接收窗口大小（记录到 TCP头的窗口大小字段，发给发送方）
- RCV.NXT :: 期望发送方发来的下一个数据
