:PROPERTIES:
:ID:       63a8feff-fff9-4e50-8a8a-260fb5158ac4
:END:
#+title: 拥塞控制
#+filetags: network

* 拥塞控制
用于控制发送方发送速度， *防止网络拥堵*
具体做法：发送方维护 =拥塞窗口cwnd= 根据网络拥塞程度动态变化

拥塞控制四个阶段：
1. *慢启动*  ：发送 cwnd 大小数量的数据，每收到一个 ACK，cwnd+1；当达到 =ssthresh（慢启动门限）= 进入 *拥塞避免*
   #+begin_example
   cwnd = 1，发送1个，ACK1个 -> cwnd + 1 = 2
   cwnd = 2，发送2个，ACK2个 -> cwnd + 2 = 4
   cwnd = 4，发送4个，ACK4个 -> cwnd + 4 = 8
   ...
   #+end_example

2. *拥塞避免* ：发送 cwnd 大小数量的数据，收到等量 ACK，cwnd+1；网络拥塞导致重传时，进入 *拥塞发生*
   #+begin_example
   cwnd = 8，发送8个，ACK8个 -> cwnd + 1 =9
   cwnd = 9，发送9个，ACK9个 -> cwnd + 1 =10
   ...
   #+end_example

3. *拥塞发生* ：
   1) 超时重传：（说明网络拥塞严重）ssthresh变成cwnd一半，cwnd重置为1，进入 *慢启动*
   2) 快速重传：（说明网络拥塞较重）ssthresh、cwnd都变为cwnd一半，进入 *快速恢复*

4. *快速恢复* ：
   发送方重传丢失的数据包
   因为已收到3个重复的ACK（由于快速重传），cwnd + 3；若每次再收到重复ACK，cwnd + 1
   若收到新ACK，表示重传成功，cwnd = ssthresh，进入 *拥塞避免*

** 图:拥塞控制 :ATTACH:
:PROPERTIES:
:ID:       d38ca0fc-847d-4de5-b01d-e3673ddf3a05
:END:
[[attachment:_20250806_174750screenshot.png]]
