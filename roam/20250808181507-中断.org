:PROPERTIES:
:ID:       d925363c-f872-4443-a964-efeeca7cfb85
:END:
#+title: 中断
#+filetags: operating_system

* 中断 [[https://www.bilibili.com/video/BV1YE411D7nH?spm_id_from=333.788.videopod.sections&vd_source=4441bc96046659b39d059d583f36ff52&p=6][bilibili-王道]]
1. 中断就是让 *操作系统夺回CPU* ，然后进行相应的处理（CPU：用户态 -> 内核态）；分为软中断、硬中断
2. 中断机制 *实现原理* ：检查中断信号（见软中断和硬中断 1.），根据 *中断信号类型* ，从 *中断向量表* 中找到对应 *中断处理程序* 执行

** 图:中断机制原理 :ATTACH:
:PROPERTIES:
:ID:       e6822e65-fd0e-4bfe-9eea-2024d99ee3b7
:END:
[[attachment:_20250809_170043screenshot.png]]


* 软中断
# 软中断=内中断=异常
1. 与当前CPU执行的指令有关；CPU在指令 *执行时* 检查是否有异常发生；分为
   - 陷阱（陷入trap） :: 程序主动请求的，内核处理后用户程序继续执行（eg：系统调用、断点调试）
   - 故障（fault）    :: 可修复的错误，内核修复后用户程序继续执行  （eg：缺页故障）
   - 终止（abort）    :: 不可修复的错误，内核直接终止用户程序      （eg：严重软件错误 整数除0）


* 硬中断
# 外中断=硬中断=中断
1. 与当前CPU执行的指令无关，来自外部；在每条指令 *执行后* 检查是否有硬中断需要处理；分为
   - 可屏蔽中断   :: eg：IO设备中断、时间中断（极少屏蔽）
   - 不可屏蔽中断 :: eg：硬件故障类中断
