:PROPERTIES:
:ID:       7a54e256-abbf-4d07-809c-85918ef01e0c
:END:
#+title: mysql执行一条sql查询语句期间发生了什么？
#+filetags: mysql

* 图:mysql执行一条sql查询语句期间发生了什么？ :ATTACH:
:PROPERTIES:
:ID:       22ac63cb-7466-402a-b866-e8a391eb837a
:END:
[[attachment:_20250827_134658screenshot.png]]
1. 连接器：建立连接、权限验证
2. 查询缓存，命中直接返回，否则继续向下执行；mysql 8.0 已删除该模块（只要表有更新，该表所有查询缓存就会失效）
3. 解析器：词法分析 + 语法分析 生成语法树，检验语法错误
4. 预处理器：检查 表、字段 是否存在，将 select * 中的 * 展开为表上所有列
5. 优化器：生成查询成本最小的 执行计划（eg：使用哪个索引、多表连接顺序、访问表顺序等）
6. 执行器：根据 执行计划 执行sql查询语句，从存储引擎读取记录返回给客户端
